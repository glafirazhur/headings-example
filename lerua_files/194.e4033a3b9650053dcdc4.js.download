(window.webpackJsonp=window.webpackJsonp||[]).push([[194],{453:function(t,n,s){"use strict";var r=s(19),e=s.n(r),o=s(5),i=s.n(o),a=s(20),c=s(24),u=s(22);function h(){const t=e()([".form-btn {\n          width: 100%;\n        }"]);return h=function(){return t},t}function d(){const t=e()([".form-btn {\n          width: ",";\n        }"]);return d=function(){return t},t}function l(){const t=e()([".form-btn {\n          width: 100%;\n        }"]);return l=function(){return t},t}function p(){const t=e()(["uc-form-subtitle {\n          margin-bottom: ",";\n        }"]);return p=function(){return t},t}function f(){const t=e()(["uc-form-subtitle {\n          margin-bottom: ",";\n        }"]);return f=function(){return t},t}function b(){const t=e()(["uc-form-title {\n          margin-top: ",";\n        }"]);return b=function(){return t},t}function m(){const t=e()(["uc-form-title {\n          margin-top: ",";\n        }"]);return m=function(){return t},t}function _(){const t=e()(["uc-form-title {\n          margin-top: ",";\n        }"]);return _=function(){return t},t}function g(){const t=e()([":host {\n        position: relative;\n        display: block;\n        width: 100%;\n        margin-right: auto;\n        margin-left: auto;\n      }\n\n      .container {\n        max-width: ",";\n        margin-right: auto;\n        margin-left: auto;\n      }\n      \n      .preloader {\n          margin-top: 70px;\n          margin-right: auto;\n          margin-left: auto;\n          width: 64px;\n          height: 64px;\n          transition: opacity 0.1s ease-in-out 0s;\n      }\n      \n      uc-form-password + uc-form-password {\n        margin-top: ",";\n      }\n\n      ","\n      ","\n      ","\n      \n      uc-form-subtitle {\n        margin-top: ",";\n      }\n      ","\n      ","\n      \n      .action-wrap {\n        margin-top: ",";\n      }\n      \n      .form-btn {\n        height: ",";\n        font-size: ",";\n        line-height: ",";\n      }\n      .form-btn[disabled] {\n        cursor: default;\n      }\n      ","\n      ","\n      ",""]);return g=function(){return t},t}const w=Object(a.b)(g(),Object(u.a)(380),Object(u.a)(24),Object(c.g)(Object(a.b)(_(),Object(u.a)(80))),Object(c.b)(Object(a.b)(m(),Object(u.a)(160))),Object(c.c)(Object(a.b)(b(),Object(u.a)(40))),Object(u.a)(12),Object(c.g)(Object(a.b)(f(),Object(u.a)(48))),Object(c.c)(Object(a.b)(p(),Object(u.a)(32))),Object(u.a)(32),Object(u.a)(52),Object(u.a)(16),Object(u.a)(52),Object(c.g)(Object(a.b)(l())),Object(c.a)(Object(a.b)(d(),Object(u.a)(196))),Object(c.c)(Object(a.b)(h())));s(42),s(58),s(166),s(319),s(322),s(215),s(194);var O=s(323),j=s(99),S=s(39),E=s(96);function v(){const t=e()(['<uc-page-content><div class="container">'," "," "," "," ","</div></uc-page-content>"]);return v=function(){return t},t}function y(){const t=e()(['<uc-form-success type="error" message="Ссылка для создания пароля устарела, запросите новую ссылку"><div slot="btn" class="actions-wrap"><uc-button buttonstyle="primary" buttonsize="m"><button @click="','">Получить ссылку</button></uc-button></div></uc-form-success>']);return y=function(){return t},t}function C(){const t=e()(['<uc-form-success type="error" message="При отправке запроса произошла ошибка. Попробуйте ещё раз через несколько минут"><div slot="btn" class="actions-wrap"><uc-button buttonstyle="primary" buttonsize="m"><button @click="','">Вернуться назад</button></uc-button></div></uc-form-success>']);return C=function(){return t},t}function V(){const t=e()(['<uc-form-success type="recovery" message="Вы успешно зарегистрировались"><div slot="btn" class="actions-wrap"><uc-button buttonstyle="primary" buttonsize="m"><button class="btn" @click="','">Войти в личный кабинет</button></uc-button></div></uc-form-success>']);return V=function(){return t},t}function N(){const t=e()(['<uc-form-title title="Завершение регистрации"></uc-form-title><uc-form-subtitle subtitle="Придумайте пароль для входа в личный кабинет"></uc-form-subtitle><form class="form" @submit="','" method="post"><uc-form-password @input="','" @blur="','" label="Пароль" inputtype="password" name="password" state="','" caption="','" message="','" ?haserror="','" .hasicon="','"></uc-form-password><uc-form-password @input="','" @blur="','" label="Подтверждение пароля" inputtype="password" name="confirm" state="','" caption="','" ?haserror="','"></uc-form-password><div class="action-wrap"><uc-button buttonstyle="primary"><button class="form-btn">Завершить</button></uc-button></div></form>']);return N=function(){return t},t}function P(){const t=e()(['<div class="preloader"><uc-circular-loader></uc-circular-loader></div>']);return P=function(){return t},t}s.d(n,"a",(function(){return B}));const k={_sendSuccess:{type:Boolean},_sendNoNameError:{type:Boolean},_sendError:{type:Boolean},_loader:{type:Boolean},passErr:{type:String},confErr:{type:String},state:{type:String},caption:{type:String},message:{type:String}};class B extends a.a{static get styles(){return w}static get properties(){return k}constructor(){super(),i()(this,"onSuccessRequest",t=>{this._form=!1,this._loader=!1,t.errors.length>0?this._sendError=!this._sendError:t.data&&(this._sendSuccess=!this._sendSuccess)}),i()(this,"_renderLoader",()=>Object(a.c)(P())),i()(this,"_renderForm",()=>Object(a.c)(N(),this.handleSubmit,this.handleChangePassword,this.handleBlurPassword,this.passState,this.passCaption,this.passMessage,this.passErr,this.hasicon,this.handleChangeConfirm,this.handleBlurConfirm,this.confState,this.confCaption,this.confErr)),i()(this,"_renderSuccessSend",()=>Object(a.c)(V(),()=>this._goToAuth())),i()(this,"_renderNoNameErrorSend",()=>Object(a.c)(C(),()=>this._errorSend())),i()(this,"_renderErrorSend",()=>Object(a.c)(y(),()=>this._goToForgotPassword())),this._form=!0,this._sendSuccess=!1,this._sendNoNameError=!1,this._sendError=!1,this._loader=!1,this.hasicon=!0,this.passErr=!1,this.confErr=!1,this.state="",this.message="",this._inputPasswordValue="",this._inputConfirmValue="",this.token=""}firstUpdated(){const t=window.location.href.split("token")[1];this.token=t}handleChangePassword(t){this._inputPasswordValue=t.detail.value,this._inputPasswordValid()}handleBlurPassword(){this._inputPasswordValid()}_inputPasswordValid(){this.passErr=Object(O.a)(this._inputPasswordValue);const{state:t,caption:n,message:s}=this.passErr[0];this.passState=t,this.passCaption=n,this.passMessage=s}handleBlurConfirm(t){this._inputConfirmValue=t.detail.value,this._inputConfirmValid()}handleChangeConfirm(t){this._inputConfirmValue=t.detail.value,this.confErr=!1}_inputConfirmValid(){switch(this._inputConfirmValue){case"":this.confErr=!0,this.confState="iserror",this.confCaption="Это поле обязательно для заполнения";break;case this._inputPasswordValue:this.confErr=!1,this.confState="",this.confCaption="";break;default:this.confErr=!0,this.confState="iserror",this.confCaption="Пароли не совпадают"}this._inputConfirmValue.length<6&&(this.confErr=!0)}handleSubmit(t){t.preventDefault(),this._inputPasswordValid(),this._inputConfirmValid(),this.confErr||"isvalid isvalid-yellow"!==this.passState&&"isvalid isvalid-green"!==this.passState||(Object(j.a)("/bin/api/ActivateAccountServlet",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"password=".concat(this._inputPasswordValue,"&token").concat(this.token)}).then(this.onSuccessRequest).catch(()=>{this._form=!1,this._loader=!1,this._sendNoNameError=!this._sendNoNameError}),this._form=!1,this._loader=!0,this.passState=!1,this._inputPasswordValue="",this._inputConfirmValue="")}render(){return Object(a.c)(v(),Object(S.a)(this._form,this._renderForm),Object(S.a)(this._sendSuccess,this._renderSuccessSend),Object(S.a)(this._sendNoNameError,this._renderNoNameErrorSend),Object(S.a)(this._sendError,this._renderErrorSend),Object(S.a)(this._loader,this._renderLoader))}_goToAuth(){document.dispatchEvent(new CustomEvent(E.a))}_goToForgotPassword(){document.dispatchEvent(new CustomEvent(E.d))}_errorSend(){this._form=!0,this._sendNoNameError=!this._sendNoNameError}}}}]);