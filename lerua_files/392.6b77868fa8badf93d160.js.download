(window.webpackJsonp=window.webpackJsonp||[]).push([[392],{967:function(e,n,t){"use strict";t.r(n);var o=t(14),i=t(426),s=t(288),r=t(19),a=t.n(r),c=t(5),l=t.n(c),u=t(49),h=t.n(u),d=t(20),b=t(197);var g=t(22),p=t(76),f=t(24);function m(){const e=a()([".suggestion:nth-child(",") {\n              animation-delay: ","s !important;\n            }"]);return m=function(){return e},e}function y(){const e=a()([".alternate .search-field {\n      transform: translateX(",");\n    }"]);return y=function(){return e},e}function v(){const e=a()([":host {\n      max-width: 100%;\n    }"]);return v=function(){return e},e}function w(){const e=a()([":host {\n      max-width: 100%;\n    }"]);return w=function(){return e},e}function j(){const e=a()([".search-form:not(.interacted) .input-wrap:hover .search-field {\n      background-color: #e8e9eb;\n    }\n\n    .search-form:not(.interacted) .input-wrap:hover .icon-wrap {\n      background: #2f333d;\n    }"]);return j=function(){return e},e}function O(){const e=a()([":host {\n    display: block;\n\n    opacity: 0.99;\n    transition: opacity 0.01s linear;\n    height: 48px !important;\n    max-width: 530px;\n    margin-bottom: 24px;\n  }\n\n  .search-field {\n    text-transform: capitalize;\n  }\n\n  .search-form {\n    position: relative;\n    z-index: 1;\n    transition: z-index 0s linear 0.3s;\n  }\n\n  .search-form.interacted {\n    z-index: ",";\n    transition: z-index 0s linear;\n  }\n\n  :host,\n  .search-form,\n  .search-field {\n    width: 100%;\n    height: 100%;\n  }\n\n  .input-wrap {\n    position: relative;\n    height: 100%;\n    overflow: hidden;\n    border-radius: ",";\n    transition: box-shadow 0.3s cubic-bezier(0.24, 0.81, 0.2, 0.96);\n  }\n\n  .interacted .input-wrap {\n    box-shadow: 0 "," "," rgba(72, 78, 92, 0.15);\n  }\n\n  .icon-wrap {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    display: none;\n    width: ",";\n    color: #fff;\n    background: #444b5b;\n    border-top-left-radius: ",";\n    border-bottom-left-radius: ",";\n\n    cursor: text;\n  }\n\n  ","\n\n  .search-form:not(.interacted) .input-wrap:active .search-field {\n    background-color: #e8e9eb;\n  }\n\n  .search-form:not(.interacted) .input-wrap:active .icon-wrap {\n    background: #2f333d;\n  }\n\n  .loupe-icon {\n    width: ",";\n    height: ",";\n  }\n\n  ","\n\n  "," \n\n  .alternate .icon-wrap {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: transform 0.3s cubic-bezier(0.24, 0.81, 0.2, 0.96);\n  }\n\n  .interacted .icon-wrap {\n    transform: translateX(-101%);\n  }\n\n  .search-field {\n    padding: 0 "," 1px;\n    color: #b0b0b0;\n    font-weight: 400;\n    font-size: ",";\n    font-family: inherit;\n    line-height: ",";\n    background: #f0f1f2;\n    border: none;\n    border-radius: ",";\n    box-shadow: none;\n    transition: background 0.3s ease-out, transform 0.3s cubic-bezier(0.24, 0.81, 0.2, 0.96);\n    -webkit-appearance: none;\n    appearance: none;\n    -webkit-tap-highlight-color: transparent;\n  }\n\n  .alternate .search-field {\n    font-size: ",";\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n\n    transform: translateX(",");\n  }\n\n  ","\n\n  .preloader {\n    position: absolute;\n    right: 0;\n    bottom: 0;\n    left: 0;\n\n    height: 4px;\n  }\n\n  .interacted .search-field {\n    background: #fff;\n    color: #484e5c;\n\n    transform: translateX(0);\n  }\n\n  .search-field::-ms-clear {\n    display: none;\n    width: 0;\n    height: 0;\n  }\n  .search-field::-ms-reveal {\n    display: none;\n    width: 0;\n    height: 0;\n  }\n\n  .search-field::-webkit-input-placeholder {\n    color: #b0b0b0;\n  }\n\n  .search-field::-moz-placeholder {\n    color: #b0b0b0;\n  }\n\n  .search-field:-ms-input-placeholder {\n    color: #b0b0b0;\n  }\n\n  .search-field::-webkit-search-decoration,\n  .search-field::-webkit-search-cancel-button,\n  .search-field::-webkit-search-results-button,\n  .search-field::-webkit-search-results-decoration {\n    display: none;\n  }\n\n  .search-field:focus {\n    outline: none;\n  }\n\n  .search-field:focus-visible {\n    outline: none;\n  }\n\n  .search-field.focus-visible {\n    outline: none;\n  }\n\n  .reset-btn {\n    --button-color: #b6b9be;\n    --button-hover-color: #a6a9b1;\n\n    position: absolute;\n    top: 0;\n    right: 0;\n    display: block;\n    height: 100%;\n    visibility: hidden;\n  }\n\n  .reset-btn.shown {\n    visibility: visible;\n  }\n\n  .reset-btn button {\n    width: 100%;\n    height: 100%;\n    margin: auto;\n    padding: 0 ",";\n    background: transparent;\n  }\n\n  .suggestions-wrap {\n    position: absolute;\n    display: none;\n    min-height: ",";\n    overflow: auto;\n    overscroll-behavior: contain;\n    -webkit-overflow-scrolling: touch;\n  }\n\n  .suggestions {\n    margin-top: ",";\n  }\n\n  .offen-search {\n    margin-top: ",";\n    margin-bottom: ",";\n    padding: 0 ",";\n    color: #a9acb1;\n    font-weight: 500;\n    font-size: ",";\n    line-height: ",";\n    letter-spacing: 0.02em;\n    text-transform: uppercase;\n  }\n\n  .offen-search-hidden {\n    display: none;\n  }\n\n  .suggestion {\n    display: block;\n    margin-bottom: 8px;\n  }\n\n  .suggestion.active {\n    --button-bg: #f4f4f4;\n  }\n\n  .error-wrap {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    margin-top: 72px;\n    text-align: center;\n  }\n\n  .error-title {\n    margin: 0 0 ",";\n    color: #707070;\n    font-size: ",";\n    line-height: ",";\n    text-align: center;\n  }\n\n  .repeat-btn button {\n    padding: 8px;\n  }\n\n  ","\n\n  .show .suggestion {\n    animation: show 0.4s cubic-bezier(0.24, 0.81, 0.2, 0.96);\n    animation-delay: 0s;\n    animation-fill-mode: backwards;\n  }\n\n  @keyframes show {\n    from {\n      transform: translateY(-8px);\n      opacity: 0;\n    }\n\n    to {\n      transform: translateY(0);\n      opacity: 1;\n    }\n  }\n  .suggestions__list {\n    margin-top: 24px;\n  }\n  .suggestion__inner {\n    justify-content: start;\n    box-sizing: border-box;\n    padding: "," ",";\n    color: #484e5c;\n    background-color: transparent;\n    font-weight: 400;\n    font-size: ",";\n    line-height: ",";\n    text-align: left;\n  }"]);return O=function(){return e},e}const x=Object(d.b)(O(),p.d,Object(g.a)(4),Object(g.a)(4),Object(g.a)(20),Object(g.a)(58),Object(g.a)(4),Object(g.a)(4),Object(g.b)(Object(d.b)(j())),Object(g.a)(20),Object(g.a)(20),Object(f.c)(Object(d.b)(w())),Object(f.e)(Object(d.b)(v())),Object(g.a)(16),Object(g.a)(16),Object(g.a)(19),Object(g.a)(4),Object(g.a)(16),Object(g.a)(58),Object(f.a)(Object(d.b)(y(),Object(g.a)(52))),Object(g.a)(10),Object(g.a)(155),Object(g.a)(28),Object(g.a)(4),Object(g.a)(12),Object(g.a)(16),Object(g.a)(12),Object(g.a)(18),Object(g.a)(20),Object(g.a)(14),Object(g.a)(22),Object(d.e)(Array(10).fill(1).map((e,n)=>Object(d.b)(m(),n+1,n/50)).join(" ")),Object(g.a)(5),Object(g.a)(16),Object(g.a)(16),Object(g.a)(22));var S=t(39),k=t(198),K=(t(256),t(190),t(99)),_=t(292),I=t(2);const R={KeyQ:"й",KeyW:"ц",KeyE:"у",KeyR:"к",KeyT:"е",KeyY:"н",KeyU:"г",KeyI:"ш",KeyO:"щ",KeyP:"з",BracketLeft:"х",BracketRight:"ъ",KeyA:"ф",KeyS:"ы",KeyD:"в",KeyF:"а",KeyG:"п",KeyH:"р",KeyJ:"о",KeyK:"л",KeyL:"д",Semicolon:"ж",Quote:"э",KeyZ:"я",KeyX:"ч",KeyC:"с",KeyV:"м",KeyB:"и",KeyN:"т",KeyM:"ь",Comma:"б",Period:"ю"};var z=t(26);const T=e=>z.e.sendClickButton({elementType:"button",elementBlock:"regionPopup",elementName:"chooseRegionHint",elementText:e?e.trim():"not set"});var C=t(97),B=t(254);function E(){const e=a()(['<uc-button class="','" buttonstyle="base" buttonsize="fullwidth" @mouseleave="','" @mouseenter="','"><a class="suggestion__inner" href="','" @click="','" tabindex="-1">',"</a></uc-button>"]);return E=function(){return e},e}function L(){const e=a()(['<div class="suggestions__list">',"</div>"]);return L=function(){return e},e}function N(){const e=a()(['<uc-linear-loader class="preloader"></uc-linear-loader>']);return N=function(){return e},e}function D(){const e=a()(['<focus-trap ?inactive="','"><form class="','" method="get" name="search-form" @submit="','"><label><div class="','"><div class="icon-wrap" @click="','"><uc-icon class="loupe-icon">','</uc-icon></div><input class="search-field js-search-field" type="search" name="q" placeholder="Поиск" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" .value="','" @keydown="','" @input="','" @focus="','" @blur="','"></div>','<uc-button buttonstyle="base" class="','"><button type="reset" @click="','"><uc-icon size="s">',"</uc-icon></button></uc-button></label></form></focus-trap>",""]);return D=function(){return e},e}const A={selectedSuggestionIndex:{type:String},loading:{type:Boolean,reflect:!0},shownSuggestions:{type:Array},inputStyle:{type:String},currregion:{type:String},selectedText:{type:String},focused:{type:Boolean},regions:{type:Array},value:{type:String},url:{type:String}};class F extends d.a{constructor(){super(),l()(this,"_onFocus",e=>{this.focused=e,this.dispatchSearchEvents()}),this.selectedSuggestionIndex=null,this.inputStyle="primary",this.selectedText="",this.loading=!1,this.focused=!1,this.regions=[],this.value="",this.url=""}connectedCallback(){super.connectedCallback(),this.loadData()}firstUpdated(){const e=this.renderRoot.querySelector(".js-search-field");e.addEventListener("focus",()=>((e="Поиск")=>z.e.sendFocus({elementType:"input",elementBlock:"regionPopup",elementName:"chooseRegion",elementText:e?e.trim():"not set"}))("Выберите город"),{once:!0}),e.addEventListener("blur",()=>{return e=this.value,z.e.sendUnFocus({elementType:"input",elementBlock:"regionPopup",elementName:"chooseRegion",elementText:e?e.trim():"not set"});var e},{once:!0}),e.addEventListener("select",e=>this._getSelectionText(e)),this.addEventListener("suggestions:updown:keys",e=>{this._handleKeysUpDown(e.detail)}),this.addEventListener("keyup",e=>{const{keyCode:n}=e,t={38:-1,40:1}[n];t&&(this.dispatchEvent(new CustomEvent("suggestions:updown:keys",{detail:t,bubbles:!0})),e.preventDefault(),e.stopPropagation())})}loadData(){this._error=!1,Object(K.a)(this.url,{credentials:"include"}).then(e=>{this.regions=[...e.data.filter(e=>e.regionId&&"34"!==e.regionId),..._.a]}).catch(()=>this._error=!0)}dispatchSearchEvents(){this.shownSuggestions.length&&this.value.length?Object(I.a)("start-search-region"):Object(I.a)("stop-search-region")}searchSuitableOptions(){this.shownSuggestions=this.regions.filter(e=>{var n;return null===(n=e.regionName)||void 0===n?void 0:n.toLowerCase().startsWith(this.value.toLowerCase().trim())})}updated(e){e.has("value")&&(this.searchSuitableOptions(),this.dispatchSearchEvents())}render(){return Object(d.c)(D(),!this.focused,h()("search-form",{interacted:this.focused}),this._onSubmit,h()("input-wrap",this.inputStyle),()=>{var e;return null===(e=this._searchFieldRef)||void 0===e?void 0:e.focus()},k.a,this.value,this._pressButton,this._onInput,()=>this._onFocus(!0),()=>this._onFocus(!1),Object(S.a)(this.loading,Object(d.c)(N())),h()("reset-btn",{shown:this.value}),this._onResetClick,b.a,this.value.length?Object(d.c)(L(),this._renderSuggestions()):"")}_getSelectionText(){this.selectedText=window.getSelection().toString().toLowerCase()}changeSelectedSuggestionId(e){this.selectedSuggestionIndex=e}_renderSuggestions(){return this.shownSuggestions.map((e,n)=>Object(d.c)(E(),h()("suggestion",{active:this.selectedSuggestionIndex===n}),()=>this.changeSelectedSuggestionId(null),()=>this.changeSelectedSuggestionId(n),this.createRegion(e.regionCode),()=>this.clickOnSuggestions(e.regionName,e.regionId),e.regionName))}clickOnSuggestions(e,n){this.rememberRegion(e,n),T(e)}_pressButton(e){const n=R[e.code];n&&!e.ctrlKey&&(e.preventDefault(),e.stopPropagation(),this.selectedText.length?(this.value=this.value.toLowerCase().replace(this.selectedText,n),this.selectedText=""):this.value+=n)}goToRegion(e){document.location.href=this.createRegion(e)}createRegion(e){const n="".concat(Object(C.b)()),t=Object(C.c)("availableFilter","inAllStores").toString();return"https://".concat(e?"".concat(e,"."):"","leroymerlin.ru").concat(location.pathname||"/").concat(Object(S.a)(Object(s.a)(Object(i.a)(t)),"?".concat(t))).concat(n)}_changeAttribute(e,n,t,o=""){t?e.setAttribute(n,o):e.removeAttribute(n)}_onInput(e){this.value=e.target.value}rememberRegion(e,n){"34"===n&&localStorage.setItem("currcite",e.trim())}_onResetClick(){this.value="",this.renderRoot.querySelector(".search-field").focus(),z.e.sendClickButton({elementType:"button",elementBlock:"regionPopup",elementName:"chooseRegionCleanInput"})}_onSubmit(e){if(this.shownSuggestions.length&&this.value){const e=this.shownSuggestions[this.selectedSuggestionIndex?this.selectedSuggestionIndex:0];this.rememberRegion(e.regionName,e.regionId),B.a.fromRegion=B.a.regionID,this.goToRegion(null==e?void 0:e.regionCode),T(null==e?void 0:e.regionName)}e.preventDefault()}_reset(){this.value=""}_handleKeysUpDown(e){let n=-1;if(null!==this.selectedSuggestionIndex){const t=[-1,this.shownSuggestions.length];n=this.selectedSuggestionIndex+e,t.includes(n)&&(n=null)}else n+=e,n<0&&(n=null);this.selectedSuggestionIndex=n}}l()(F,"styles",x),l()(F,"properties",A),Object(o.b)("uc-searchbar-region",F)}}]);