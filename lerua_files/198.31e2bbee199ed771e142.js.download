(window.webpackJsonp=window.webpackJsonp||[]).push([[198],{960:function(t,e,n){"use strict";n.r(e);var i=n(19),s=n.n(i),a=n(20),r=n(14),c=(n(829),n(271)),o=n(0),h=n(66);function p(){const t=s()(['\n      <div class="search">\n        <div class="magnifier"></div>\n        <input\n          @keyup=','\n          type="search"\n          name="query"\n          placeholder=','\n          autocomplete="off"\n          value=','\n          spellcheck="false"\n          @click="','"\n          style="color:','"\n        />\n        <div @click=',' class="clear"></div>\n        <hr />\n      </div>\n    ']);return p=function(){return t},t}function u(){const t=s()(["\n        @media (min-width: 768px) {\n          input {\n            box-sizing: border-box;\n            width: 100%;\n            height: 40px;\n            padding-right: 20px;\n            padding-left: 20px;\n            border-bottom: 2px solid #66c05d;\n          }\n          :host(.is-focused) input {\n            z-index: 2010;\n            padding-left: 0px;\n            -webkit-transition-duration: 0.5s;\n            -o-transition-duration: 0.5s;\n            transition-duration: 0.5s;\n          }\n          .clear {\n            position: absolute;\n            right: 10px;\n            display: none;\n          }\n          :host(.is-focused) .clear {\n            z-index: 2049;\n            display: flex;\n          }\n        }\n        @media (min-width: 768px) {\n          .magnifier {\n            position: absolute;\n            width: 20px;\n            height: 15px;\n            background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCIgdmlld0JveD0iMCAwIDE0IDE0Ij4gICAgPHBhdGggZmlsbD0iIzk5OSIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTMuNzg3IDEyLjc1MmwtMy40NTEtMy40NjZhNS41MTkgNS41MTkgMCAwIDAgMS4zNzMtMy42MzRDMTEuNzEgMi41MzYgOS4wODMgMCA1Ljg1NSAwIDIuNjI2IDAgMCAyLjUzNiAwIDUuNjUyYzAgMy4xMTcgMi42MjYgNS42NTMgNS44NTUgNS42NTNhNS45MzYgNS45MzYgMCAwIDAgMy4zNTQtMS4wMjNsMy40NzcgMy40OTJjLjE0Ni4xNDYuMzQxLjIyNi41NS4yMjZhLjc3NC43NzQgMCAwIDAgLjUzLS4yMDYuNzIuNzIgMCAwIDAgLjAyMS0xLjA0MnpNNS44NTUgMS40NzVjMi4zODYgMCA0LjMyNyAxLjg3NCA0LjMyNyA0LjE3NyAwIDIuMzA0LTEuOTQxIDQuMTc4LTQuMzI3IDQuMTc4UzEuNTI3IDcuOTU2IDEuNTI3IDUuNjUyYzAtMi4zMDMgMS45NDItNC4xNzcgNC4zMjgtNC4xNzd6Ii8+PC9zdmc+)\n              no-repeat;\n          }\n        }\n        @media (max-width: 767px) {\n          .magnifier {\n            display: none;\n          }\n        }\n\n        :host {\n          height: 36px;\n        }\n        @media (max-width: 767px) {\n          :host {\n            height: 64px;\n          }\n        }\n\n        .search {\n          display: -webkit-box;\n          display: -ms-flexbox;\n          display: flex;\n          -ms-flex-direction: row;\n          flex-direction: row;\n          align-items: center;\n          width: 100%;\n          height: 100%;\n          background-color: transparent;\n          -webkit-box-orient: horizontal;\n          -webkit-box-direction: normal;\n          -webkit-box-align: center;\n          -ms-flex-align: center;\n        }\n\n        @media (min-width: 768px) {\n          .search {\n            border-bottom: 2px solid #66c05d;\n          }\n        }\n        @media (max-width: 767px) {\n          :host:focus .search {\n            border-bottom: 1px solid #66c05d;\n          }\n          :host .search {\n            position: relative;\n            border-bottom: 1px solid rgb(221, 221, 221);\n          }\n        }\n        input {\n          font-family: inherit;\n          border-radius: 0px;\n          -webkit-appearance: none;\n          -moz-appearance: none;\n          appearance: none;\n        }\n        [readonly] {\n          color: rgb(153, 153, 153);\n        }\n      "]);return u=function(){return t},t}class d extends c.a{static get properties(){return{action:{type:String},value:{type:String},placeholder:{type:String},ispopupopen:{type:Boolean}}}static get styles(){return[super.styles,Object(a.b)(u())]}constructor(){super(),this.value="",this.form=null,this.placeholder="Поиск",this.ispopupopen=!1}typeText(t){switch(this.searchValue=this.input.value.trim(),sessionStorage.setItem("searchValue",this.searchValue),t.which){case 13:t.preventDefault(),this.searchValue.length>0&&(Object(h.m)(this.searchValue),document.location="".concat(o.m,"?q=").concat(encodeURIComponent(this.searchValue)));break;case 27:t.preventDefault(),this.input.blur();break;case 16:case 17:case 18:case 38:case 37:case 39:break;case 40:Object(h.d)(this.search,1);break;case 9:break;default:Object(h.h)(this.search,t.target.value)}t.stopPropagation()}"characterСheck"(){}clearInput(){Object(h.l)(this.input.value),this.input.value="",Object(h.h)(this.search,""),this.focusOnSearch()}changeSearchValue(t){this.input.value=t.detail.value,Object(h.h)(this.search,t.detail.value),this.focusOnSearch()}focusOnSearch(){this.input.focus()}firstUpdated(){this.search=this.closest("[data-search-main-container]"),this.input=this.renderRoot.querySelector("input"),this.form=this.renderRoot.querySelector(".search"),this.search.addEventListener("search-value-modify",t=>this.changeSearchValue(t)),this.search.addEventListener("focus-on-search",t=>this.focusOnSearch(t));const t=sessionStorage.getItem("searchValue");t&&"null"!==t&&Object(h.i)(this.search,t.replace(/\+/g," ")),this.input.blur()}readOnly(t){this.ispopupopen||t.target.blur()}render(){return Object(a.c)(p(),this.typeText,this.placeholder,this.value,this.readOnly,this.ispopupopen?"rgb(51, 51, 51)":"rgb(153, 153, 153)",this.clearInput)}}Object(r.b)("uc-header-search-2",d);var l=n(272);function m(){const t=s()(['<li @click="','" @keydown="','" tabindex="','"><div class="name">',"</div></li>"]);return m=function(){return t},t}function g(){const t=s()([".name:first-letter {\n          text-transform: uppercase;\n        }\n        @media (min-width: 768px) {\n          li {\n            width: calc(100% - 20px);\n          }\n        }"]);return g=function(){return t},t}class b extends l.a{static get styles(){return[super.styles,Object(a.b)(g())]}static get properties(){return{index:String,last:String,familyid:{type:String},facets:{type:String}}}redirect(){sessionStorage.setItem("searchValue",this.name),Object(h.b)(this.search,this.name,this.index,"popular-request");const t=["q=".concat(encodeURIComponent(this.name)),this.familyid&&"family=".concat(encodeURIComponent(this.familyid)),this.facets,"suggest=true"].filter(t=>!!t).join("&");document.location="".concat(o.m,"?").concat(t)}keyboardist(t){switch(t.which){case 27:t.preventDefault(),Object(h.c)(),this.search.blur();break;case 32:Object(h.i)(this.search,this.name),Object(h.j)(this.search,Number(this.index),this.name);break;case 13:this.redirect();break;case 38:this.newId=Number(this.index)-1,0===this.newId?Object(h.e)(this.search):Object(h.d)(this.search,this.newId),this.newId>0&&Object(h.a)(this.search,this.newId);break;case 40:t.preventDefault(),this.newId=Number(this.index)+1,Object(h.d)(this.search,this.newId),Object(h.a)(this.search,this.newId);break;case 9:t.preventDefault(),"true"===this.last?Object(h.e)(this.search):(this.newId=Number(this.index)+1,Object(h.d)(this.search,this.newId),Object(h.k)(this.search,this.newId))}t.stopPropagation()}constructor(){super(),this.last=!1,this.familyid=null,this.facets=null}render(){return Object(a.c)(m(),this.redirect,this.keyboardist,this.index,this.name)}firstUpdated(){this.li=this.renderRoot.querySelector("li"),this.search=this.closest("[data-search-main-container]"),this.search.addEventListener("focus-on-hint",t=>this.focusOnTheListItem(t))}focusOnTheListItem(t){t.detail.focusHintId===Number(this.index)&&this.li.focus()}}Object(r.b)("uc-search-list-item",b);n(830),n(831);var y=n(430);function w(){const t=s()(["\n        .close {\n          background-repeat: no-repeat;\n          background-position: center;\n          background-size: contain;\n        }\n        @media (max-width: 767px) {\n          .close {\n            top: 18px;\n            width: 18px;\n            height: 30px;\n          }\n        }\n      "]);return w=function(){return t},t}class I extends y.a{static get styles(){return[super.styles,Object(a.b)(w())]}closePopup(){Object(h.c)()}firstUpdated(){this.search=this.closest("[data-search-main-container]"),this.popup=this.renderRoot.querySelector("popup"),this.headerRow=document.querySelector("[data-js-header-row]"),this.scrollSize=window.innerWidth-document.body.clientWidth,this.header=document.querySelector("[data-js-header]"),document.addEventListener("close-search-popup",()=>this.popupOpen(!1)),this.search.addEventListener("open-search-popup",()=>this.popupOpen(!0)),this.search.addEventListener("keydown",t=>this.escClosePopup(t));this.headerRow.querySelector(".logo").addEventListener("click",t=>{this.headerRow.classList.contains("popup-open")&&(t.preventDefault(),Object(h.c)())})}escClosePopup(t){27===t.which&&(t.preventDefault(),this.popupOpen(!1))}popupOpen(t){this.open=t,0!==this.scrollSize&&t?(document.body.classList.add("is_blocked_all",t),this.header.style.marginRight="".concat(this.scrollSize,"px")):t||(document.body.classList.remove("is_blocked_all",t),this.header.style.marginRight="0px"),this.headerRow.classList.toggle("popup-open",t),t?Object(h.e)(this.search):this.search.blur()}}Object(r.b)("uc-header-search-popup",I);var x=n(273),f=n(274);function j(){const t=s()(['<li @click="','" @keydown="','" href="','" tabindex="','"><div class="name">','</div><div class="price">'," &#8381;</div></li>"]);return j=function(){return t},t}class O extends x.a{static get styles(){return[super.styles,f.a]}static get properties(){return{name:{type:String},price:{type:String},href:{type:String},index:{type:String},last:{type:String}}}redirect(){sessionStorage.setItem("searchValue",this.name),Object(h.b)(this.search,this.name,this.index,"product"),document.location="https://".concat(document.location.host,"/").concat(this.href)}keyboardist(t){switch(t.preventDefault(),t.which){case 32:Object(h.i)(this.search,this.name),Object(h.j)(this.search,Number(this.index),this.name);break;case 13:this.redirect();break;case 38:this.newId=Number(this.index)-1,0===this.newId?Object(h.e)(this.search):Object(h.d)(this.search,this.newId),this.newId>0&&Object(h.a)(this.search,this.newId);break;case 40:this.newId=Number(this.index)+1,Object(h.d)(this.search,this.newId),Object(h.a)(this.search,this.newId);break;case 9:"true"===this.last?Object(h.e)(this.search):(Object(h.d)(this.search,Number(this.index)+1),Object(h.k)(this.search,this.newId));break;case 27:t.preventDefault(),Object(h.c)(),this.search.blur()}t.stopPropagation()}constructor(){super(),this.last=!1,this.href="#"}render(){return Object(a.c)(j(),this.redirect,this.keyboardist,this.href,this.index,this.name,this.price)}firstUpdated(){this.li=this.renderRoot.querySelector("li"),this.search=this.closest("[data-search-main-container]"),this.search.addEventListener("focus-on-hint",t=>this.focusOnTheListItem(t))}focusOnTheListItem(t){t.detail.focusHintId===Number(this.index)&&this.li.focus()}}Object(r.b)("uc-search-list-item-with-price",O);var M=n(8),k=n(275);function N(){const t=s()(["\n          <div @click=",' class="icon"></div>\n          <slot name="popup"></slot>\n        ']);return N=function(){return t},t}function v(){const t=s()(["\n        @media (max-width: 767px) {\n          :host {\n            width: 1.5em;\n            height: 1.7em;\n            padding-top: 12px;\n          }\n          .icon {\n            cursor: pointer;\n          }\n        }\n      "]);return v=function(){return t},t}class S extends k.a{static get properties(){return{input:{type:String},search:{type:Object}}}static get styles(){return[super.styles,Object(a.b)(v())]}openPopup(){Object(h.f)(this),setTimeout(()=>{Object(h.e)(this)},300)}render(){return Object(M.e)()?Object(a.c)(N(),this.openPopup):""}}Object(r.b)("uc-header-search-passive",S);var A=n(11);function z(){const t=s()(["@media (min-width: 768px) {\n    :host {\n      padding-right: 10px;\n      padding-left: 10px;\n    }\n  }\n  uc-search-list {\n    text-align: left;\n  }\n  @media (max-width: 767px) {\n    uc-search-list-title {\n      margin-top: -4px;\n      margin-bottom: 3px;\n      font-size: 12px !important;\n    }\n  }\n  @media (min-width: 768px) {\n    uc-search-list {\n      margin-top: -8px;\n    }\n  }\n  @media (max-width: 767px) {\n    :host {\n      width: 1.57143em;\n      height: 1.57143em;\n    }\n  }\n  .icon {\n    display: block;\n    width: 100%;\n    height: 100%;\n    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9IjAgMCAyMiAyMiI+ICAgIDxkZWZzPiAgICAgICAgPHBhdGggaWQ9ImEiIGQ9Ik0wIDIyaDIyVjBIMHoiLz4gICAgPC9kZWZzPiAgICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPiAgICAgICAgPG1hc2sgaWQ9ImIiIGZpbGw9IiNmZmYiPiAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI2EiLz4gICAgICAgIDwvbWFzaz4gICAgICAgIDxwYXRoIGZpbGw9IiMyQTJBMkEiIGQ9Ik0xMy40MDcgMi43NWE1Ljg0NCA1Ljg0NCAwIDEgMCAwIDExLjY4NSA1Ljg0NCA1Ljg0NCAwIDAgMCAwLTExLjY4NnpNMy41NTMgMjEuMzYxQTIuMDYyIDIuMDYyIDAgMSAxIC43NiAxOC4zMzdsNS40NTctNS4wMzVBOC41OTUgOC41OTUgMCAxIDEgMjIgOC41OTRhOC41OTQgOC41OTQgMCAwIDEtMTIuNzU5IDcuNTE4bC01LjY4OCA1LjI1eiIgbWFzaz0idXJsKCNiKSIvPiAgICA8L2c+PC9zdmc+);\n    background-repeat: no-repeat;\n    background-position: center;\n    background-size: cover;\n  }\n\n  input {\n    -ms-flex: 1 1 90%;\n    flex: 1 1 90%;\n    padding: 12px 18px 12px;\n    color: #999999;\n    font-size: 12px;\n    border: 3px solid #66c05d;\n    -webkit-box-flex: 1;\n  }\n\n  button {\n    width: 40px;\n    max-height: 45px;\n    background-color: #66c05d;\n    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjIiIGhlaWdodD0iMjIiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJNMCAyMmgyMlYwSDB6Ii8+PC9kZWZzPjxnIGZpbGw9IiNmZmYiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PG1hc2sgaWQ9ImIiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PHBhdGggZD0iTTEzLjQwNyAyLjc1YTUuODQ0IDUuODQ0IDAgMSAwIDAgMTEuNjg1IDUuODQ0IDUuODQ0IDAgMCAwIDAtMTEuNjg2ek0zLjU1MyAyMS4zNjFBMi4wNjIgMi4wNjIgMCAxIDEgLjc2IDE4LjMzN2w1LjQ1Ny01LjAzNUE4LjU5NSA4LjU5NSAwIDEgMSAyMiA4LjU5NGE4LjU5NCA4LjU5NCAwIDAgMS0xMi43NTkgNy41MThsLTUuNjg4IDUuMjV6IiBtYXNrPSJ1cmwoI2IpIi8+PC9nPjwvc3ZnPg==);\n    background-repeat: no-repeat;\n    background-position: center;\n    background-size: 14px;\n    border: none;\n  }\n\n  [slot='hint'] {\n    opacity: 0;\n  }\n  .smooth-appearance .item-show-15 {\n    z-index: 2050;\n    opacity: 1;\n    -webkit-transition: opacity 3.75s;\n    -o-transition: opacity 3.75s;\n    transition: opacity 3.75s;\n  }\n\n  .smooth-appearance .item-show-14 {\n    z-index: 2050;\n    opacity: 1;\n    -webkit-transition: opacity 3.5s;\n    -o-transition: opacity 3.5s;\n    transition: opacity 3.5s;\n  }\n\n  .smooth-appearance .item-show-13 {\n    z-index: 2050;\n    opacity: 1;\n    -webkit-transition: opacity 3.25s;\n    -o-transition: opacity 3.25s;\n    transition: opacity 3.25s;\n  }\n\n  .smooth-appearance .item-show-12 {\n    z-index: 2050;\n    opacity: 1;\n    -webkit-transition: opacity 3s;\n    -o-transition: opacity 3s;\n    transition: opacity 3s;\n  }\n\n  .smooth-appearance .item-show-11 {\n    z-index: 2050;\n    opacity: 1;\n    -webkit-transition: opacity 2.75s;\n    -o-transition: opacity 2.75s;\n    transition: opacity 2.75s;\n  }\n\n  .smooth-appearance .item-show-10 {\n    z-index: 2050;\n    opacity: 1;\n    -webkit-transition: opacity 2.5s;\n    -o-transition: opacity 2.5s;\n    transition: opacity 2.5s;\n  }\n\n  .smooth-appearance .item-show-9 {\n    z-index: 2050;\n    opacity: 1;\n    -webkit-transition: opacity 2.25s;\n    -o-transition: opacity 2.25s;\n    transition: opacity 2.25s;\n  }\n\n  .smooth-appearance .item-show-8 {\n    z-index: 2050;\n    opacity: 1;\n    -webkit-transition: opacity 2s;\n    -o-transition: opacity 2s;\n    transition: opacity 2s;\n  }\n\n  .smooth-appearance .item-show-7 {\n    z-index: 2050;\n    opacity: 1;\n    -webkit-transition: opacity 1.75s;\n    -o-transition: opacity 1.75s;\n    transition: opacity 1.75s;\n  }\n\n  .smooth-appearance .item-show-6 {\n    z-index: 2050;\n    opacity: 1;\n    -webkit-transition: opacity 1.5s;\n    -o-transition: opacity 1.5s;\n    transition: opacity 1.5s;\n  }\n\n  .smooth-appearance .item-show-5 {\n    z-index: 2050;\n    opacity: 1;\n    -webkit-transition: opacity 1.25s;\n    -o-transition: opacity 1.25s;\n    transition: opacity 1.25s;\n  }\n\n  .smooth-appearance .item-show-4 {\n    z-index: 2050;\n    opacity: 1;\n    -webkit-transition: opacity 1s;\n    -o-transition: opacity 1s;\n    transition: opacity 1s;\n  }\n\n  .smooth-appearance .item-show-3 {\n    z-index: 2050;\n    opacity: 1;\n    -webkit-transition: opacity 0.75s;\n    -o-transition: opacity 0.75s;\n    transition: opacity 0.75s;\n  }\n\n  .smooth-appearance .item-show-2 {\n    z-index: 2050;\n    opacity: 1;\n    -webkit-transition: opacity 0.5s;\n    -o-transition: opacity 0.5s;\n    transition: opacity 0.5s;\n  }\n\n  .smooth-appearance .item-show-1 {\n    z-index: 2050;\n    opacity: 1;\n    -webkit-transition: opacity 0.25s;\n    -o-transition: opacity 0.25s;\n    transition: opacity 0.25s;\n  }\n\n  .smooth-appearance .item-show-0 {\n    z-index: 2050;\n    opacity: 1;\n    -webkit-transition: opacity 0s;\n    -o-transition: opacity 0s;\n    transition: opacity 0s;\n  }\n  uc-header-search-popup-catalog-btn {\n    margin-right: 15px;\n  }\n  :host {\n    position: relative;\n  }\n  @media (min-width: 768px) {\n    uc-search-list {\n      position: absolute;\n      top: 58px;\n      left: 10px;\n      z-index: 2002;\n    }\n  }\n  @media (min-width: 768px) {\n    uc-search-list {\n      display: none;\n    }\n    uc-header-search-popup[open] + uc-search-list {\n      display: block;\n    }\n  }"]);return z=function(){return t},t}const C=Object(a.b)(z());function L(t,e=""){return fetch(t+e,{credentials:"include"}).then(t=>200===t.status?t:Promise.reject(t)).then(t=>t.json())}const D={};function P(t,e=!1){return e&&(D[t]=void 0),D[t]instanceof Promise||(D[t]=L(t,"")),D[t]}var T=n(26);function H(){const t=s()(['<div data-search-main-container ?ispopupopen="','" class="','"><uc-header-search-2 ?ispopupopen="','" class="','" @click="','"></uc-header-search-2><uc-header-search-popup></uc-header-search-popup><uc-search-list>',"</uc-search-list></div>"]);return H=function(){return t},t}function E(){const t=s()(['<uc-header-search-passive data-search-main-container ?ispopupopen="','" class="','"><uc-header-search-popup slot="popup"><uc-header-search-2 ?ispopupopen="','"></uc-header-search-2><uc-search-list>',"</uc-search-list></uc-header-search-popup></uc-header-search-passive>"]);return E=function(){return t},t}function U(){const t=s()(['<uc-search-list-title class="item-show-0" slot="hint" title="Часто ищут"></uc-search-list-title>']);return U=function(){return t},t}function Z(){const t=s()(['<uc-search-list-item-with-price class="item-show-','" index="','" slot="hint" href="product/',"-",'.html" name="','" price="','" last="','"></uc-search-list-item-with-price>']);return Z=function(){return t},t}function G(){const t=s()(['<uc-search-list-item class="item-show-','" index="','" slot="hint" last="','" name="','" .familyid="','" .facets="','"></uc-search-list-item>']);return G=function(){return t},t}function V(){const t=s()(['<uc-search-list-error error="','"></uc-search-list-error>']);return V=function(){return t},t}class R extends a.a{static get properties(){return{defaultHintsString:{type:String},urlHints:{type:String},urlProducts:{type:String},last:{type:String},popupTopMargin:{type:String},isPopupOpen:{type:String},searchValue:{type:String},hints:{type:Array},products:{type:Array},defaultHints:{type:Array},slowAppearance:{type:String}}}static get styles(){return C}constructor(){super(),this.defaultHintsString="жалюзи, двери, обои, плитка, фанера, ламинат, шторы, зеркало, линолеум",this.defaultHintsTextArr=[],this.defaultHints=[],this.products=[],this.hints=[],this.isPopupOpen=!1,this.error={hints:!1,products:!1},this.hintsHtml=[],this.hintForGa=[],this.searchValue="",this.slowAppearance=""}fillTemplate(t){const e=t.length-1;return t.map((t,n)=>{const i=e===n;return t.price?this.fillHintTemplateWithPrice(t,n,i):this.fillHintTemplate(t,n,i)})}fillErrorTemplate(t="Ошибка сервера"){return Object(a.c)(V(),t)}fillHintTemplate(t,e,n){let i;return"object"==typeof t.facets&&(i=Object.keys(t.facets||{}).map(e=>{let n=null;const i=t.facets[e];if(i instanceof Array){const t=i.join("_");n="".concat(e,"=").concat(t)}return n}).filter(t=>!!t).join("&")),Object(a.c)(G(),e+1,e+1,n,t.phrase||t,t.familyId||null,i)}fillHintTemplateWithPrice(t,e,n){return Object(a.c)(Z(),e+1,e+1,t.semanticUrl,t.article,t.displayedName,t.price,n)}receiveHints(t,e=""){var n,i;let s;switch(typeof e){case"string":s=e.trim()?L(t,e):P(t,e);break;case"object":s=(null==e||null===(n=e.query)||void 0===n||null===(i=n.trim)||void 0===i?void 0:i.call(n))?L(t,"?".concat(Object.keys(e).map(t=>"".concat(t,"=").concat(e[t])).join("&"))):P(t);break;default:s=Promise.reject(new Error("Type of the argument 'params' should by undefined|string|object"))}return s.then(t=>t.data.querySuggestions||t.data)}changeHints(t){const e={query:"string"==typeof t?encodeURIComponent(t.trim()):"",isBannerNeeded:encodeURIComponent(!1),homePage:encodeURIComponent(o.j)};this.receiveHints(this.urlHints,e).then(t=>{t.length>0&&(this.hints=t,this.error.hints=!1)}).catch(()=>{this.error.hints=!0})}changeProducts(t){const e="?q=".concat(encodeURIComponent(t),"&tab=products");this.receiveHints(this.urlProducts,e).then(t=>t.productList).then(t=>{t.length>0&&(this.products=t,this.error.products=!1)}).catch(()=>{this.error.products=!0})}createdefaultHintsListHtml(t){const e=Object(a.c)(U());this.receiveHints(t,"").then(t=>{this.defaultHints=[e,...this.fillTemplate(t)],this.defaultHintsTextArr=t}).catch(t=>{1===this.defaultHints.length&&(this.defaultHintsTextArr=this.defaultHintsString.split(/, /),this.defaultHints=[e,...this.fillTemplate(this.defaultHintsTextArr)])})}firstUpdated(){const t=document.querySelector("[data-js-header-row]"),e=t.querySelector(".catalog-button");this.isCookieProductsShow="visible"===window.CookieUtils.get("s_products");const n=Object(A.debounce)(t=>this.changeHints(t),Number(o.i)),i=this.isCookieProductsShow?Object(A.debounce)(t=>this.changeProducts(t),Number(o.k)):null;var s;this.searchValue=sessionStorage.getItem("searchValue")?sessionStorage.getItem("searchValue"):"",this.hintForGa=sessionStorage.getItem("searchHints")?JSON.parse(sessionStorage.getItem("searchHints")):[],this.search=this.renderRoot.querySelector("[data-search-main-container]"),this.searchValue.length>0&&0===this.hintForGa&&(this.changeHints(this.searchValue),this.isCookieProductsShow&&this.changeProducts(this.searchValue)),this.createdefaultHintsListHtml(this.urlHints),this.search.addEventListener("open-search-popup",()=>this.openPopup(!0)),document.addEventListener("close-search-popup",()=>{this.openPopup(!1),this.sendPopupGa("close-popup")}),this.addEventListener("search-value-changed",t=>{t.stopPropagation(),this.searchValue=t.detail.value,n(this.searchValue),this.isCookieProductsShow&&i(this.searchValue)}),e.addEventListener("click",e=>{t.classList.contains("popup-open")&&(Object(h.g)(this.search),setTimeout(()=>document.dispatchEvent(new CustomEvent("close-search-popup")),200))}),s=this.search,document.addEventListener("keydown",t=>{27===t.which&&(s.classList.contains("smooth-appearance")||s.hasAttribute("ispopupopen"))&&(Object(h.c)(),s.blur())}),T.e.sendView({name:"search_icon",position:"header"})}sendPopupGa(t){this.dispatchEvent(new CustomEvent(t,{bubbles:!0,cancelable:!0}))}openPopup(t){this.isPopupOpen=t}createHintsList(){if(this.searchValue&&""!==this.searchValue.trim())if(this.error.hints&&this.error.products)this.hintForGa=["Ошибка сервера"],this.hintsHtml=[this.fillErrorTemplate()];else{const t=this.isCookieProductsShow?[...this.hints,...this.products]:this.hints;this.hintForGa=t.length>0?t:this.hintForGa,this.hintsHtml=this.fillTemplate(this.hintForGa)}else this.hintsHtml=this.defaultHints,this.hintForGa=this.defaultHintsTextArr;return this.search&&Object(h.n)(this.hintForGa),this.hintsHtml}popupVisibility(){this.isPopupOpen||Object(h.f)(this.search)}render(){return setTimeout(()=>{this.slowAppearance=this.isPopupOpen?"smooth-appearance":""},300),Object(M.e)()?Object(a.c)(E(),this.isPopupOpen,this.slowAppearance,this.isPopupOpen,this.createHintsList()):Object(a.c)(H(),this.isPopupOpen,this.slowAppearance,this.isPopupOpen,this.isPopupOpen?"is-focused":"",this.popupVisibility,this.createHintsList())}}Object(r.b)("uc-header-search",R)}}]);